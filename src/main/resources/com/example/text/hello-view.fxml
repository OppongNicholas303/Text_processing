<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.text.TextFlow?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns:fx="http://javafx.com/fxml" xmlns="http://javafx.com/javafx"
            fx:controller="com.example.text.HelloController"
            style="-fx-background-color: #f5f6fa;">

  <!-- Top Section: Header -->
  <top>
    <VBox alignment="CENTER" style="-fx-background-color: #2c3e50;" prefHeight="70">
      <padding>
        <Insets top="10" bottom="10"/>
      </padding>
      <Label text="Regex Processing Tool"
             style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: white;"/>
      <Label text="Process and analyze text with regular expressions"
             style="-fx-font-size: 14; -fx-text-fill: #bdc3c7;"/>
    </VBox>
  </top>

  <!-- Center Section: Main Content -->
  <center>
    <VBox spacing="10">
      <padding>
        <Insets top="10" right="10" bottom="10" left="10"/>
      </padding>

      <!-- Input Section -->
      <HBox spacing="10" VBox.vgrow="NEVER">
        <!-- Regex and Replace Fields -->
        <VBox spacing="10" HBox.hgrow="ALWAYS">
          <VBox spacing="5" styleClass="card">
            <style>
              -fx-background-color: white;
              -fx-background-radius: 10;
              -fx-padding: 10;
            </style>
            <effect>
              <DropShadow color="#00000022" radius="10" spread="0.05"/>
            </effect>

            <Label text="Regular Expression"
                   style="-fx-font-size: 14; -fx-font-weight: bold;"/>
            <TextField fx:id="regexField" promptText="Enter your regex pattern"
                       style="-fx-padding: 8; -fx-background-radius: 5; -fx-font-size: 14;"
                       maxHeight="40" minHeight="40"/>
          </VBox>

          <VBox spacing="5" styleClass="card">
            <style>
              -fx-background-color: white;
              -fx-background-radius: 10;
              -fx-padding: 10;
            </style>
            <effect>
              <DropShadow color="#00000022" radius="10" spread="0.05"/>
            </effect>

            <Label text="Replacement Text"
                   style="-fx-font-size: 14; -fx-font-weight: bold;"/>
            <TextField fx:id="replaceField" promptText="Enter replacement text"
                       style="-fx-padding: 8; -fx-background-radius: 5; -fx-font-size: 14;"
                       maxHeight="40" minHeight="40"/>
          </VBox>
        </VBox>

        <!-- Action Buttons -->
        <VBox spacing="5" alignment="CENTER" minWidth="150">
          <Button text="Find Matches" onAction="#findMatches"
                  style="-fx-background-color: #3498db; -fx-text-fill: white;
                                   -fx-padding: 10 25; -fx-background-radius: 5;
                                   -fx-font-size: 14; -fx-font-weight: bold;"
                  maxWidth="Infinity"/>
          <Button text="Replace Text" onAction="#replaceText"
                  style="-fx-background-color: #2ecc71; -fx-text-fill: white;
                                   -fx-padding: 10 25; -fx-background-radius: 5;
                                   -fx-font-size: 14; -fx-font-weight: bold;"
                  maxWidth="Infinity"/>
          <Button fx:id="clearHistoryButton" text="Clear History"
                  style="-fx-background-color: #e74c3c; -fx-text-fill: white;
                                   -fx-padding: 10 25; -fx-background-radius: 5;
                                   -fx-font-size: 14; -fx-font-weight: bold;"
                  maxWidth="Infinity"/>
          <Button fx:id="toggleHistoryButton" text="Toggle History"
                  style="-fx-background-color: #f39c12; -fx-text-fill: white;
                                   -fx-padding: 10 25; -fx-background-radius: 5;
                                   -fx-font-size: 14; -fx-font-weight: bold;"
                  maxWidth="Infinity"
                  onAction="#toggleHistory"/>
        </VBox>
      </HBox>

      <!-- Main Content Area -->
      <HBox spacing="10" VBox.vgrow="ALWAYS">
        <!-- Input Text Area -->
        <VBox spacing="5" HBox.hgrow="ALWAYS" styleClass="card">
          <style>
            -fx-background-color: white;
            -fx-background-radius: 10;
            -fx-padding: 15;
          </style>
          <effect>
            <DropShadow color="#00000022" radius="10" spread="0.05"/>
          </effect>

          <Label text="Input Text"
                 style="-fx-font-size: 14; -fx-font-weight: bold;"/>
          <TextArea fx:id="textArea" promptText="Enter the text to process"
                    wrapText="true" VBox.vgrow="ALWAYS"
                    style="-fx-background-radius: 5; -fx-font-size: 14;"/>
        </VBox>

        <!-- History Section -->
        <VBox fx:id="historyPane" spacing="5" HBox.hgrow="NEVER" styleClass="card" maxWidth="300">
          <style>
            -fx-background-color: white;
            -fx-background-radius: 10;
            -fx-padding: 15;
          </style>
          <effect>
            <DropShadow color="#00000022" radius="10" spread="0.05"/>
          </effect>

          <Label text="Operation History"
                 style="-fx-font-size: 14; -fx-font-weight: bold;"/>
          <ListView fx:id="historyListView" VBox.vgrow="ALWAYS"
                    style="-fx-background-radius: 5; -fx-font-size: 14;"/>
        </VBox>
      </HBox>

      <!-- Results Section -->
      <VBox spacing="5" styleClass="card">
        <style>
          -fx-background-color: white;
          -fx-background-radius: 10;
          -fx-padding: 15;
        </style>
        <effect>
          <DropShadow color="#00000022" radius="10" spread="0.05"/>
        </effect>

        <HBox spacing="20" alignment="CENTER_LEFT">
          <Label text="Results"
                 style="-fx-font-size: 14; -fx-font-weight: bold;"/>
          <HBox spacing="10" HBox.hgrow="ALWAYS" alignment="CENTER_RIGHT">
            <Button text="Undo" fx:id="undo" onAction="#undoHandle"
                    style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
            <Button text="Redo" fx:id="redo" onAction="#redoHandle"
                    style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
          </HBox>
        </HBox>

        <SplitPane VBox.vgrow="ALWAYS" orientation="VERTICAL">
          <TextFlow fx:id="matchesFlow"
                    style="-fx-background-radius: 5; -fx-padding: 10; -fx-font-size: 14;
                                    -fx-background-color: #f8f9fa;">
            <Text fx:id="matchedText" text="Matched patterns will appear here"
                  style="-fx-font-style: italic;"/>
          </TextFlow>
          <TextArea fx:id="resultArea" editable="false"
                    promptText="Processed text will appear here"
                    wrapText="true"
                    style="-fx-background-radius: 5; -fx-font-size: 14;"/>
        </SplitPane>
      </VBox>
    </VBox>
  </center>

  <!-- Bottom Section: Footer -->
  <bottom>
    <HBox alignment="CENTER" style="-fx-background-color: #2c3e50;" prefHeight="30">
      <Label text="NSS Lab: Regex Processing Tool | Made with JavaFX"
             style="-fx-text-fill: #bdc3c7; -fx-font-size: 12;"/>
    </HBox>
  </bottom>
</BorderPane>